<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Leehaoze&#39;s blog">
<meta property="og:url" content="http://leehaoze.com/index.html">
<meta property="og:site_name" content="Leehaoze&#39;s blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Leehaoze&#39;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
	<script>
		let ifr = document.createElement('iframe');
        ifr.src = 'mimarket://details?id=com.baidu.searchbox&back=true';
        ifr.style.display = 'none';
        document.body.appendChild(ifr);
        window.setTimeout(() => {
		alert('close');
            document.body.removeChild(ifr);
        }, 300);
	</script>



  <link rel="canonical" href="http://leehaoze.com/">





  <title>Leehaoze's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Leehaoze's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Code&Life</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leehaoze.com/2020/01/15/Electron下多进程的选择/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leehaoze">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leehaoze's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/15/Electron下多进程的选择/" itemprop="url">Electron下多进程的选择</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-15T23:59:36+08:00">
                2020-01-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="多进程的必要性"><a href="#多进程的必要性" class="headerlink" title="多进程的必要性"></a>多进程的必要性</h1><p>开发一个桌面客户端应用，必然要面临一些场景需要通过多进程实现，比如需要进行非常重的计算，再比如需要异步的查询数据库，或者在后台需要建立socket通信。</p>
<p>Electron本身就分为两个进程：<code>主进程</code>和<code>渲染进程</code>，两个进程通过<code>rpc</code>互相通信，但是如果<code>主进程</code>阻塞，<code>渲染进程</code>也会阻塞，这就是为什么不要在<code>主进程</code>里执行重量级的数据运算等操作的原因。</p>
<h1 id="so-如何在Electron里实现多进程"><a href="#so-如何在Electron里实现多进程" class="headerlink" title="so 如何在Electron里实现多进程"></a>so 如何在Electron里实现多进程</h1><p>目前来看有两种方式:</p>
<ol>
<li>使用NodeJs提供的Web workers</li>
<li>在主进程里创建一个看不到的窗口(每个窗口都是一个单独的渲染进程)执行其他任务</li>
</ol>
<h1 id="woker方式"><a href="#woker方式" class="headerlink" title="woker方式"></a>woker方式</h1><p>worker 是从父进程创建出来后，就会执行创建时构造传入的JS脚本文件，并且worker是单独运行在另外的上下文中的，因此使用Web Worker这种方式有其本身的一些限制：</p>
<ul>
<li>worker无法访问dom</li>
<li>worker无法使用Electron提供的模块</li>
<li>worker不适合用来运行一些长期任务（像服务器进程一眼一直运行），适合运行一些运算量比较大的临时任务</li>
</ul>
<h1 id="worker的例子"><a href="#worker的例子" class="headerlink" title="worker的例子"></a>worker的例子</h1><p>待补充…</p>
<h1 id="隐藏的窗口方式"><a href="#隐藏的窗口方式" class="headerlink" title="隐藏的窗口方式"></a>隐藏的窗口方式</h1><p>这个说白了就是创建一个看不见的窗口，每个窗口都有一个渲染进程，也算是曲线多进程了，你可以在这个渲染进程里干一些计算量比较大的任务之类的。<br>另外这种方式可以访问DOM元素，可以通过IPC方式跟主进程通信，但是这种方式相对而言更加占用资源。</p>
<p>在<code>main.js</code>入口文件中，通过指定参数可以创建一个隐藏的窗口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// create hidden worker window</span><br><span class="line">  workerWindow = new BrowserWindow(&#123;</span><br><span class="line">    show: false,</span><br><span class="line">    webPreferences: &#123; nodeIntegration: true &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h1 id="进程与进程间的通信方式"><a href="#进程与进程间的通信方式" class="headerlink" title="进程与进程间的通信方式"></a>进程与进程间的通信方式</h1><p>Electron并没有提供进程与进程间的通信方式，因此要采用很low的方式：<br>子进程发消息给主进程，主进程再根据消息内容传给对应的另外一个子进程</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leehaoze.com/2020/01/15/创建Electron应用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leehaoze">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leehaoze's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/15/创建Electron应用/" itemprop="url">创建Electron应用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-15T23:59:15+08:00">
                2020-01-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="安装NodeJS"><a href="#安装NodeJS" class="headerlink" title="安装NodeJS"></a>安装NodeJS</h1><p>有什么问题是神奇的brew解决不了的呢<br>终端输入<br><code>brew install node</code></p>
<h1 id="创建项目文件夹"><a href="#创建项目文件夹" class="headerlink" title="创建项目文件夹"></a>创建项目文件夹</h1><ul>
<li>新建文件夹<br><code>mkdir yout-app</code></li>
<li>初始化<br><code>npm init</code><br>随后一路回车就行</li>
<li>编辑配置文件<br>编辑生成的<code>package.json</code><br>在<code>scripts</code>字段新增一行<code>&quot;start&quot;: &quot;electron .&quot;</code></li>
</ul>
<h1 id="安装Electron依赖"><a href="#安装Electron依赖" class="headerlink" title="安装Electron依赖"></a>安装Electron依赖</h1><p>又有什么是神奇的npm解决不了的依赖呢<br>终端输入<br><code>npm install --save-dev electron</code></p>
<h1 id="创建一个窗口"><a href="#创建一个窗口" class="headerlink" title="创建一个窗口"></a>创建一个窗口</h1><ul>
<li>新建入口文件<code>main.js</code></li>
<li>引入<code>electron</code>模块<br><code>const { app, BrowserWindow } = require(&#39;electron&#39;)</code><br><code>app</code>负责应用的生命周期，<code>BrowserWindow</code>负责创建窗口</li>
<li>创建用于显示的<code>index.html</code><br>创建一个静态页面 内容随意</li>
<li>创建窗口<br>在应用程序<code>ready</code>的时候调用创建窗口函数,加载<code>index.html</code>文件到窗口中<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function createWindow () &#123;   </span><br><span class="line">  // 创建浏览器窗口</span><br><span class="line">  let win = new BrowserWindow(&#123;</span><br><span class="line">    width: 800,</span><br><span class="line">    height: 600,</span><br><span class="line">    webPreferences: &#123;</span><br><span class="line">      nodeIntegration: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // 加载index.html文件</span><br><span class="line">  win.loadFile(&apos;index.html&apos;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.on(&apos;ready&apos;, createWindow)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h1><p><code>npm run start</code><br>即可看到窗口</p>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>Electron其实就是普通的页面+nodejs 结合，electron中有两个进程，一个叫做<code>渲染进程</code>,另外一个叫做<code>主进程</code>。<br>顾名思义啊，<code>渲染进程</code>负责页面的渲染，可以理解为是个浏览器。<br>运行<code>package.json</code>中定义的<code>main</code>脚本的是主进程，该进程负责与操作系统的交互，可以使用NodeJS的API。</p>
<p><code>主进程</code>使用<code>BrowserWindow</code>创建页面，每个页面都在自己单独的<code>渲染进程中运行</code>。主进程与渲染进程通过<code>ipc</code>的方式通信</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leehaoze.com/2020/01/07/搭建SpringBoot多模块应用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leehaoze">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leehaoze's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/07/搭建SpringBoot多模块应用/" itemprop="url">搭建SpringBoot多模块应用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-07T15:00:36+08:00">
                2020-01-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="新建项目"><a href="#新建项目" class="headerlink" title="新建项目"></a>新建项目</h1><ul>
<li>新建项目文件夹<br><code>mkdir ~/IdeaProjects/spring-boot-behind</code></li>
<li>在Idea中打开<br>打开<code>Intellij Idea</code>,选择<code>Open</code>，打开刚刚新建的文件夹</li>
<li>添加<code>Maven</code><br>右键左侧导航栏中的<strong>项目名</strong>，选择<code>Add New Framewrok</code><br><img src="http://image.leehaoze.cn/529DFD82AC31FFF5AEB1FD51F6BF3E06.jpg" alt="IMAGE"><br>在弹窗中左侧导航栏，选择<code>Maven</code><br><img src="http://image.leehaoze.cn/130F3F2701CF0242C048152630E27FC1.jpg" alt><br>点击<code>OK</code>,填写一些信息即可。</li>
<li>添加<code>Spring</code>依赖<ul>
<li>编辑<code>pom.xml</code>，添加<code>packaging</code>条目<code>&lt;packaging&gt;pom&lt;/packaging&gt;</code></li>
<li>再引入<code>Spring</code>的<strong>pom parent</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.1.7.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line">- 删除生成的`src`文件夹</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h1 id="添加base子模块"><a href="#添加base子模块" class="headerlink" title="添加base子模块"></a>添加base子模块</h1><p>base模块如其名，都是一些基础的组件，比如异常处理、拦截器、过滤器、切片、返回结果封装、通用工具类等</p>
<ul>
<li><p>新建<code>Module</code><br>右击左侧导航栏项目名，选择<code>New-&gt;Module...</code><br><img src="http://image.leehaoze.cn/B573462E755842F0D6F2A6A3FEC05ACC.jpg" alt><br>在弹窗中选择<code>Maven</code>，点击<code>Next</code>，在<code>Name</code>中填写<code>base</code>，点击Finish<br><img src="http://image.leehaoze.cn/87444A44B9D1A0A65917B6A814DBCE0D.jpg" alt></p>
</li>
<li><p>设置版本<br>子模块的版本号可以单独维护，也可以跟随父模块，这里为了统一，所有子模块都跟随父模块的版本，编辑<code>pom.xml</code>添加一条<code>version</code>条目即可<br><img src="http://image.leehaoze.cn/4CFF941A1277547D84D8B602BDEBD6E9.jpg" alt></p>
</li>
<li><p>引入依赖<br>整个项目都要用到的依赖都是在这个模块里引入，比如：<code>spring-boot-start</code>、<code>lombok</code>、<code>fastjson</code>等<br>编辑<code>base/pom.xml</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;!-- Spring Boot Starter--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!-- json库 --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.2.59&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!-- 提供Getter Setter注解等 --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.18.8&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建包文件夹<br>  在<code>base/src/main/java</code>下新建与<code>group ID</code>相同的包<br>  <img src="http://image.leehaoze.cn/B0D46510706DA90D0A0DA949C34EE4D0.jpg" alt><br>  <img src="http://image.leehaoze.cn/7E3AAF6527DEEA4B11F0C9109FED3507.jpg" alt></p>
</li>
<li><p>新建几个常用文件夹后大概长这样<br><img src="http://image.leehaoze.cn/F37546B6B939312934F2552522C7A28C.jpg" alt></p>
</li>
</ul>
<h1 id="添加bean子模块"><a href="#添加bean子模块" class="headerlink" title="添加bean子模块"></a>添加bean子模块</h1><p>bean模块内主要是一些常量、实体类、DTO类</p>
<ul>
<li><p>新建<code>Module</code><br>再新建一个名为<code>bean</code>的<code>Module</code></p>
</li>
<li><p>引入依赖（记得在<code>pom.xml</code>里添加此模块的版本号跟随父模块）<br>bean模块依赖base模块即可，如果有其他关于实体类的依赖，可以在此模块引入，只用于此模块。比如我在这里引入了谷歌的<code>guava</code>包，使用其中的<code>Convert</code>实现实体类与DTO类的转换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.leehaoze&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;base&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;$&#123;parent.version&#125;&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建包文件夹</p>
</li>
<li><p>新建几个常用文件夹<br><img src="http://image.leehaoze.cn/20200107170723.png" alt></p>
</li>
</ul>
<h1 id="添加dao子模块"><a href="#添加dao子模块" class="headerlink" title="添加dao子模块"></a>添加dao子模块</h1><p>dao模块内是数据操作，包括与数据库、redis等数据交互都在此模块，包括<code>MyBatis</code>的<code>Mapper</code>也是在此模块</p>
<ul>
<li><p>新建<code>Module</code><br>新建一个名为<code>dao</code>的<code>Module</code></p>
</li>
<li><p>引入依赖（记得在<code>pom.xml</code>里添加此模块的版本号跟随父模块）<br><code>dao</code>模块依赖于<code>bean</code>模块，初次之外使用<code>MyBatis</code>的话，还要在此模块 引入<code>MyBatis</code>相关依赖。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;artifactId&gt;dao&lt;/artifactId&gt;</span><br><span class="line"></span><br><span class="line">&lt;version&gt;$&#123;parent.version&#125;&lt;/version&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;!-- bean --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.leehaoze&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;bean&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;$&#123;parent.version&#125;&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!-- mybatis --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.1.0&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!-- 分页工具 --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.2.3&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!-- MySQL 连接驱动 --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;8.0.17&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建包文件夹</p>
</li>
<li><p>在包下新建<code>mapper</code>文件夹</p>
</li>
</ul>
<h1 id="添加manager子模块"><a href="#添加manager子模块" class="headerlink" title="添加manager子模块"></a>添加manager子模块</h1><p>manager模块主要负责对数据的加工处理，实现DTO类与实体类的互转、数据的组合查询等。</p>
<ul>
<li>新建<code>Module</code><br>新建一个名为<code>manager</code>的<code>Module</code></li>
<li>引入依赖（记得在<code>pom.xml</code>里添加此模块的版本号跟随父模块）<br><code>manager</code>依赖于<code>dao</code>模块，</li>
<li>新建包文件夹</li>
<li>在报下新建<code>manager</code>文件夹</li>
</ul>
<h1 id="添加service子模块"><a href="#添加service子模块" class="headerlink" title="添加service子模块"></a>添加service子模块</h1><p>service模块主要负责业务实现，包括参数的校验、业务逻辑处理等。</p>
<ul>
<li>新建<code>Module</code><br>新建一个名为<code>service</code>的<code>Module</code></li>
<li>引入依赖（记得在<code>pom.xml</code>里添加此模块的版本号跟随父模块）<br><code>service</code>依赖于<code>manager</code>子模块</li>
<li>新建包文件夹</li>
<li>在包下新建<code>service</code>文件夹</li>
</ul>
<h1 id="添加web子模块"><a href="#添加web子模块" class="headerlink" title="添加web子模块"></a>添加web子模块</h1><p>web子模块主要是controller以及程序入口</p>
<ul>
<li><p>新建<code>Module</code><br>新建一个名为<code>web</code>的<code>Module</code></p>
</li>
<li><p>引入依赖（记得在<code>pom.xml</code>里添加此模块的版本号跟随父模块）<br><code>web</code>模块依赖于<code>service</code>模块<br>另外需要添加<code>build</code>插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建包文件夹</p>
</li>
<li><p>在包下新建<code>controller</code>文件夹</p>
</li>
<li><p>创建应用入口</p>
<ul>
<li>在包下新建<code>MainApplication</code>类</li>
<li>为类添加<code>@SpringBootApplication</code>注解</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">public class MainController &#123;</span><br><span class="line">  public static void main(String[] args) &#123;</span><br><span class="line">      SpringApplication.run(MainController.class, args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建<code>Spring-Boot</code>配置文件<br>在<code>web/src/main.java/resources</code>中新建<code>application.properties</code><br>配置数据库连接配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.url=jdbc:mysql://你的数据库机器名:端口号/数据库名?useUnicode=true&amp;characterEncoding=gbk&amp;zeroDateTimeBehavior=convertToNull&amp;jdbcCompliantTruncation=false</span><br><span class="line"></span><br><span class="line">spring.datasource.username=账号</span><br><span class="line"></span><br><span class="line">spring.datasource.password=密码</span><br><span class="line"></span><br><span class="line">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span><br><span class="line"></span><br><span class="line">mybatis.mapper-locations=classpath*:mapper/*.xml</span><br><span class="line"></span><br><span class="line">server.port=8293</span><br></pre></td></tr></table></figure>

<p><em>注意配置中<code>mybatis.mapper-locations</code>配置项，该项值为`classpath</em>:mapper/<em>.xml`,第一个*代表在所有的包路径下都查找，不然的话只会在配置文件所在的包路径下查找</em></p>
<h1 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h1><p>打开<code>MainApplication</code>，可以看到IDEA在编辑区域左侧有一个绿色的小箭头，点击即可运行应用<br><img src="http://image.leehaoze.cn/E07737DD52103C03FC5A8B9A953A4A8F.jpg" alt></p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leehaoze.com/2020/01/03/2-3树与红黑树/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leehaoze">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leehaoze's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/03/2-3树与红黑树/" itemprop="url">2-3树与红黑树</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-03T21:18:23+08:00">
                2020-01-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="从2-3树到红黑树"><a href="#从2-3树到红黑树" class="headerlink" title="从2-3树到红黑树"></a>从2-3树到红黑树</h1><p>红黑树是这样定义的：</p>
<ul>
<li>每个结点要么是红的要么是黑的。  </li>
<li>根结点是黑的。  </li>
<li>每个叶结点（叶结点即指树尾端NIL指针或NULL结点）都是黑的。  </li>
<li>如果一个结点是红的，那么它的两个儿子都是黑的。  </li>
<li>对于任意结点而言，其到叶结点树尾端NIL指针的每条路径都包含相同数目的黑结点。 </li>
</ul>
<p>一颗常见的红黑树长这样<br><img src="https://s2.ax1x.com/2020/01/03/laONsx.jpg" alt="laONsx.jpg"></p>
<p>如果你把红节点拉平变成这样</p>
<p><img src="https://s2.ax1x.com/2020/01/03/laOOmV.jpg" alt="laOOmV.jpg"></p>
<p>你会发现这就是一颗 2-3树</p>
<p>红色节点表示该节点与其父亲组合成为一个3-节点。我们再来看一下红黑树的定义中的限制。</p>
<p>第一条说明红黑树中有两种不同类型的节点，红节点-黑节点，红节点的含义之前说过了。 另外值得注意的是红色节点是一直在黑色节点的左儿子上，这样做也是为了方便判断</p>
<p>第二条是要求根节点必须为黑色，因为红色节点代表着红色节点与父亲组成一个3-节点，而根节点是没有父亲的，因此根节点必须是黑色。</p>
<p>第三条要求所有叶子节点是黑色，方便我们代码中去识别没有儿子的节点</p>
<p>第四条 亦是对应着2-3树的性质，如果一个红色节点的儿子也是红色节点，那么他们就组成了一个2-3-4树，2-3-4树就有另外的插入删除方式了，因此有这一条定义限制红黑树必须对应一颗标准的2-3树</p>
<p>第五条 也叫 红黑树的黑高一致，因为黑色节点对应着2-3树中的一个 2-节点或3-节点，红色节点只是3-节点的表达方式的组成部分。2-3树是完美平衡的树，他的子树也都是一颗完美平衡的树，因此对于每个子树的根节点而言，到达左右子树的叶子节点的路径长度肯定是一样的，因此红黑树中有这样一条性质 保证了红黑树对应2-3树的完美平衡特点。</p>
<h1 id="红黑树的查询"><a href="#红黑树的查询" class="headerlink" title="红黑树的查询"></a>红黑树的查询</h1><p>红黑树也是一颗二叉搜索树，因此其查询方式与二叉搜索树的查询方式一致</p>
<h1 id="红黑树的插入"><a href="#红黑树的插入" class="headerlink" title="红黑树的插入"></a>红黑树的插入</h1><p>对于2-3的插入操作而言，有一个分裂节点的操作，也就是在新插入的节点沉入底部后，根据节点的类型进行分裂操作，相对应的红黑树也有此类操作，称为<code>反色</code><br><img src="https://s2.ax1x.com/2020/01/03/laOzY4.jpg" alt="laOzY4.jpg"><br>对比 2-3树<br><img src="https://s2.ax1x.com/2020/01/03/laXClR.jpg" alt="laXClR.jpg"></p>
<p>另外红黑树还有相对应的旋转操作：左旋和右旋<br><img src="https://s2.ax1x.com/2020/01/03/laXP61.jpg" alt="laXP61.jpg"></p>
<p>通过这两种（旋转、分裂）操作，我们可以将模拟2-3树的红黑树实现与2-3树一样的操作。</p>
<p>在2-3树中，我们将新插入的节点沉入底部，与最底部的节点合并，随后再进行其他操作。为了表示合并，我们将新插入的节点用红色节点表示，随后再对其进行调整。大概分为几种情况</p>
<ul>
<li><p>插入后 某个黑色节点的 左儿子是黑色，右儿子是黑色，我们要将红色节点旋转过来。<br><img src="https://s2.ax1x.com/2020/01/03/laXETO.jpg" alt="laXETO.jpg"></p>
</li>
<li><p>插入后，形成了4-节点<br>我们直接利用反色分解<br><img src="https://s2.ax1x.com/2020/01/03/laXete.jpg" alt="laXete.jpg"></p>
</li>
<li><p>插入后，有连续的红色节点<br>利用旋转转为情况2，再按照情况2操作<br><img src="https://s2.ax1x.com/2020/01/03/laXZkD.jpg" alt="laXZkD.jpg"></p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leehaoze.com/2019/12/26/首页为什么挂了/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leehaoze">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leehaoze's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/26/首页为什么挂了/" itemprop="url">首页为什么挂了</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-26T21:38:26+08:00">
                2019-12-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leehaoze.com/2019/12/26/探索红黑树/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leehaoze">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leehaoze's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/26/探索红黑树/" itemprop="url">探索红黑树</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-26T21:10:24+08:00">
                2019-12-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>树作为数据结构中的一种，其目的自然与其他数据结构一致，为了解决数据的高效存取。</p>
<p>树是作为链表和数组的中和，链表插入、删除很快，但是查找很慢，数组查找很快，但是插入删除很慢，而具有一定特征的树(有序、平衡)可以很好中和两者特点，插入删除查询都比较快。</p>
<p>要想明白红黑树，就要从其起源开始说，红黑树本质是一个弱平衡的二叉搜索树。</p>
<p>先来说最普通的二叉搜索树，二叉搜索树是在普通的二叉树上增加了一个要求，简单来讲就是一个节点的左子树(如果有)中所有元素都要小于该节点，节点的右子树(如果有)中所有元素都要大于该节点，并且树中没有相同的值，这样一个二叉树就是二叉搜索树，也叫有序二叉树、排序二叉树。<br><img src="https://s2.ax1x.com/2019/12/26/lEneG8.jpg" alt="IMAGE"><br>这样的一棵树查找时理想状态下最多只需要比较树中一半的节点，可以将时间复杂度降为log(N)级别,插入时无需操作其他节点，只需要改变一下指针。<br>但是这种数据结构存在退化的问题，当一颗二叉搜索树中每个节点都比其父节点大，就会导致该树退化为线性表，导致其失去了log(N)的查询效率。<br><img src="https://s2.ax1x.com/2019/12/26/lEnmRS.jpg" alt="IMAGE"></p>
<p>为了解决这个问题，人们发明了自平衡二叉搜索树(AVL)，总而言之就是在二叉搜索树的基础上又加了一个要求，树中任一一个节点的左右子树高度差 &lt;= 1，这样保证了树不会退化，查找效率一直保证为log(n)。为了保证树的平衡，需要在插入时根据树的不同状态进行”旋转”操作，以保证插入新的节点后，树仍然是平衡的。<br>但是由于这货为了保证严格的平衡，插入时有左旋、右旋、左右旋、右左旋四种可能的操作，因此在代码实现上比较复杂，插入时的效率略低</p>
<p>so，为了解决掉树的失衡退化问题，而又不采用严格平衡的AVL树导致插入效率较低，人们又在想新的数据结构。<br>对于树的失衡问题，本质上是因为 树 无法自己选择 新节点的位置 的权利，这是由搜索树左右子树必须大于/小于根节点内的特性决定的，也就是说对于一般的搜索树，一个新插入的节点，与根节点进行比较后，就会自动进入到子树中，与子树的根节点比较后又会自动进入到子树的子树 ， 最终得到一个确定的位置，树是无法自己分配节点位置，进而导致了树的失衡退化。因此要解决这个问题可以从 赋予 树 决定节点位置的权利 下手。 树虽然无法决定 新插入节点 离开的方向（去往左子树 或是 右子树），但可以赋予树 让节点暂时留下来的能力，大佬们设计出了一种叫做2-3树的数据结构。<br><img src="https://s2.ax1x.com/2019/12/26/lEnnxg.jpg" alt="IMAGE"></p>
<p>2-3树新加入了 一种叫做 3节点的东西，3-节点拥有两个值，三个子树，左子树所有值小于第一个值，中间的子树所有值介于两值之间，右子树所有值大于第二个值。简而言之就是这个节点内可以有两个值，拥有三个子树，3-节点的出现让树除了可以安排新节点到他应该所在的子树中去以外，还可以选择暂时缓存下该节点，放到3-节点自己手里。</p>
<p>其插入流程可以概述为 先将新节点沉到最底部的叶子节点，如果该节点是一个2-节点，还可以存放一个节点，那么久存放起来，如果该节点是一个3-节点，没有空间存放了，那么就进行分裂操作，分裂操作是指将3-节点的中间值 向上挪动，如果父节点是2-节点，则容纳下分裂的节点，如果父节点是3-节点，则父节点继续分裂。</p>
<p>虽然这种数据结构很好的解决了平衡以及维护平衡的效率问题，但无奈其实现比较复杂，需要维护两种的节点的数据结构，实现该树需要大量的代码，不易维护。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leehaoze.com/2019/10/10/搭建Electron-React应用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leehaoze">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leehaoze's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/10/搭建Electron-React应用/" itemprop="url">搭建Electron+React应用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-10T17:34:14+08:00">
                2019-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考自 <code>https://juejin.im/post/5c83e225e51d453b117ba825</code></p>
<h1 id="创建React项目"><a href="#创建React项目" class="headerlink" title="创建React项目"></a>创建React项目</h1><p><code>yarn create react-app APP_NAME</code></p>
<h1 id="添加Electron"><a href="#添加Electron" class="headerlink" title="添加Electron"></a>添加Electron</h1><p><code>cd APP_NAME</code><br><code>yarn add electron --dev</code></p>
<h1 id="配置Electron入口文件"><a href="#配置Electron入口文件" class="headerlink" title="配置Electron入口文件"></a>配置Electron入口文件</h1><p>React入口文件为<code>public/index.html</code>,在<code>public</code>下新建一个Electron应用的入口文件<code>electron.js</code></p>
<h1 id="添加工具库，实现一行命令启动Electron-React"><a href="#添加工具库，实现一行命令启动Electron-React" class="headerlink" title="添加工具库，实现一行命令启动Electron + React"></a>添加工具库，实现一行命令启动Electron + React</h1><p><code>yarn add concurrently --dev</code><br><code>yarn add wait-on --dev</code><br>在<code>package.json</code>中新加一个脚本命令<br><code>&quot;electron-dev&quot;: &quot;concurrently \&quot;BROWSER=none react-scripts start\&quot; \&quot;wait-on http://localhost:3000 &amp;&amp; electron .\&quot;&quot;</code></p>
<h1 id="Electron-入口文件代码"><a href="#Electron-入口文件代码" class="headerlink" title="Electron 入口文件代码"></a>Electron 入口文件代码</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">const &#123;app, BrowserWindow&#125; = require(&apos;electron&apos;);</span><br><span class="line">const isDev = require(&apos;electron-is-dev&apos;);</span><br><span class="line">const path = require(&apos;path&apos;);</span><br><span class="line"></span><br><span class="line">let mainWindow;</span><br><span class="line"></span><br><span class="line">function createWindow() &#123;</span><br><span class="line">    mainWindow = new BrowserWindow(&#123;</span><br><span class="line">        width: 960,</span><br><span class="line">        height: 600,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    if (isDev) &#123;</span><br><span class="line">        mainWindow.loadURL(&apos;http://localhost:3000/&apos;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        mainWindow.loadFile(&apos;index.html&apos;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    mainWindow.webContents.openDevTools();</span><br><span class="line">    mainWindow.on(&apos;closed&apos;, function () &#123;</span><br><span class="line">        mainWindow = null</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.on(&apos;ready&apos;, createWindow);</span><br><span class="line"></span><br><span class="line">app.on(&apos;window-all-closed&apos;, function () &#123;</span><br><span class="line">    if (process.platform !== &apos;darwin&apos;) &#123;</span><br><span class="line">        app.quit()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.on(&apos;activate&apos;, function () &#123;</span><br><span class="line">    if (mainWindow === null) &#123;</span><br><span class="line">        createWindow()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="启动应用"><a href="#启动应用" class="headerlink" title="启动应用"></a>启动应用</h1><p><code>yarn electron-dev</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leehaoze.com/2019/10/10/4-寻找两个有序数组的中位数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leehaoze">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leehaoze's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/10/4-寻找两个有序数组的中位数/" itemprop="url">4.寻找两个有序数组的中位数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-10T15:34:08+08:00">
                2019-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">给定两个大小为 m 和 n 的有序数组 nums1 和 nums2。</span><br><span class="line"></span><br><span class="line">请你找出这两个有序数组的中位数，并且要求算法的时间复杂度为 O(log(m + n))。</span><br><span class="line"></span><br><span class="line">你可以假设 nums1 和 nums2 不会同时为空。</span><br><span class="line"></span><br><span class="line">示例 1:</span><br><span class="line"></span><br><span class="line">nums1 = [1, 3]</span><br><span class="line">nums2 = [2]</span><br><span class="line"></span><br><span class="line">则中位数是 2.0</span><br><span class="line">示例 2:</span><br><span class="line"></span><br><span class="line">nums1 = [1, 2]</span><br><span class="line">nums2 = [3, 4]</span><br><span class="line"></span><br><span class="line">则中位数是 (2 + 3)/2 = 2.5</span><br><span class="line"></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">链接：https://leetcode-cn.com/problems/median-of-two-sorted-arrays</span><br><span class="line">著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>

<h1 id="初始思路"><a href="#初始思路" class="headerlink" title="初始思路"></a>初始思路</h1><p>计算出两个数组合并后的长度，得到中位数所在的游标，然后通过双游标遍历两个数组的方式合并数组，找到合并后的数组的中位数所在的位置即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public double findMedianSortedArrays(int[] nums1, int[] nums2) &#123;</span><br><span class="line">        int lengthOf1 = nums1.length;</span><br><span class="line">        int lengthOf2 = nums2.length;</span><br><span class="line"></span><br><span class="line">        boolean odd = (lengthOf1 + lengthOf2) % 2 == 0;</span><br><span class="line">        int mediumPos = (lengthOf1 + lengthOf2 + 1) / 2;</span><br><span class="line"></span><br><span class="line">        int posOf1 = 0, posOf2 = 0, currentPos = 0;</span><br><span class="line"></span><br><span class="line">        int preNum = 0, currentNum = 0;</span><br><span class="line">        double result = 0;</span><br><span class="line"></span><br><span class="line">        while (posOf1 &lt; lengthOf1 || posOf2 &lt; lengthOf2) &#123;</span><br><span class="line">            preNum = currentNum;</span><br><span class="line"></span><br><span class="line">            if (posOf1 &lt; lengthOf1 &amp;&amp; posOf2 &lt; lengthOf2) &#123;</span><br><span class="line">                if (nums1[posOf1] &lt; nums2[posOf2]) &#123;</span><br><span class="line">                    currentNum = nums1[posOf1];</span><br><span class="line">                    posOf1++;</span><br><span class="line">                &#125;</span><br><span class="line">                else &#123;</span><br><span class="line">                    currentNum = nums2[posOf2];</span><br><span class="line">                    posOf2++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            else &#123;</span><br><span class="line">                if (posOf1 &lt; lengthOf1) &#123;</span><br><span class="line">                    currentNum = nums1[posOf1];</span><br><span class="line">                    posOf1++;</span><br><span class="line">                &#125;</span><br><span class="line">                else &#123;</span><br><span class="line">                    currentNum = nums2[posOf2];</span><br><span class="line">                    posOf2++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            currentPos++;</span><br><span class="line"></span><br><span class="line">            // 如果是偶数</span><br><span class="line">            if (odd) &#123;</span><br><span class="line">                if (currentPos == mediumPos + 1) &#123;</span><br><span class="line">                    // 到了中间位置</span><br><span class="line">                    result = (preNum + currentNum) / 2D;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            else &#123;</span><br><span class="line">                if (currentPos == mediumPos) &#123;</span><br><span class="line">                    result = (double) currentNum;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h1><p>对于其中的合并部分 其实可以有更好的办法，优化后的代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public double findMedianSortedArrays(int[] nums1, int[] nums2) &#123;</span><br><span class="line">        int lengthOf1 = nums1.length;</span><br><span class="line">        int lengthOf2 = nums2.length;</span><br><span class="line"></span><br><span class="line">        boolean odd = (lengthOf1 + lengthOf2) % 2 == 0;</span><br><span class="line">        int mediumPos = (lengthOf1 + lengthOf2 + 1) / 2;</span><br><span class="line"></span><br><span class="line">        int posOf1 = 0, posOf2 = 0, currentPos = 0;</span><br><span class="line"></span><br><span class="line">        int preNum = 0, currentNum = 0;</span><br><span class="line">        double result = 0;</span><br><span class="line"></span><br><span class="line">        while (posOf1 &lt; lengthOf1 || posOf2 &lt; lengthOf2) &#123;</span><br><span class="line">            preNum = currentNum;</span><br><span class="line"></span><br><span class="line">            if (posOf1 &lt; lengthOf1 &amp;&amp; (posOf2 &gt;= lengthOf2 || nums1[posOf1] &lt; nums2[posOf2])) &#123;</span><br><span class="line">                currentNum = nums1[posOf1];</span><br><span class="line">                posOf1++;</span><br><span class="line">            &#125;</span><br><span class="line">            else &#123;</span><br><span class="line">                currentNum = nums2[posOf2];</span><br><span class="line">                posOf2++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            currentPos++;</span><br><span class="line"></span><br><span class="line">            // 如果是偶数</span><br><span class="line">            if (odd) &#123;</span><br><span class="line">                if (currentPos == mediumPos + 1) &#123;</span><br><span class="line">                    // 到了中间位置</span><br><span class="line">                    result = (preNum + currentNum) / 2D;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            else &#123;</span><br><span class="line">                if (currentPos == mediumPos) &#123;</span><br><span class="line">                    result = (double) currentNum;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leehaoze.com/2019/10/08/3-无重复字符的最长子串/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leehaoze">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leehaoze's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/08/3-无重复字符的最长子串/" itemprop="url">3.无重复字符的最长子串</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-08T18:58:49+08:00">
                2019-10-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">给定一个字符串，请你找出其中不含有重复字符的 最长子串 的长度。</span><br><span class="line"></span><br><span class="line">示例 1:</span><br><span class="line"></span><br><span class="line">输入: &quot;abcabcbb&quot;</span><br><span class="line">输出: 3 </span><br><span class="line">解释: 因为无重复字符的最长子串是 &quot;abc&quot;，所以其长度为 3。</span><br><span class="line">示例 2:</span><br><span class="line"></span><br><span class="line">输入: &quot;bbbbb&quot;</span><br><span class="line">输出: 1</span><br><span class="line">解释: 因为无重复字符的最长子串是 &quot;b&quot;，所以其长度为 1。</span><br><span class="line">示例 3:</span><br><span class="line"></span><br><span class="line">输入: &quot;pwwkew&quot;</span><br><span class="line">输出: 3</span><br><span class="line">解释: 因为无重复字符的最长子串是 &quot;wke&quot;，所以其长度为 3。</span><br><span class="line">     请注意，你的答案必须是 子串 的长度，&quot;pwke&quot; 是一个子序列，不是子串。</span><br><span class="line"></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">链接：https://leetcode-cn.com/problems/longest-substring-without-repeating-characters</span><br><span class="line">著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>

<h1 id="初始思路"><a href="#初始思路" class="headerlink" title="初始思路"></a>初始思路</h1><p>可以准备一个桶，用于记录已经出现的字符，可以解决判断重复字符的问题 ，还需要解决记录已形成的子串的长度问题，可以准备一个额外的字符串变量，记录已知的最长的子串。<br>在形成新的子串时，遇到重复的 字符便终止形成 然后比较是否是新的最长子串。<br>然后记录已出现的字符时，可以记录字符出现的位置，这样形成子串时遇到重复的字符只需要回到重复字符上次出现的位置即可</p>
<h1 id="1A代码"><a href="#1A代码" class="headerlink" title="1A代码"></a>1A代码</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public int lengthOfLongestSubstring(String s) &#123;</span><br><span class="line">        // 记录已经找到的子串中最长的长度</span><br><span class="line">        int maxLength = 0;</span><br><span class="line">        // 字符串的长度</span><br><span class="line">        int strLength = s.length();</span><br><span class="line">        //</span><br><span class="line">        HashMap&lt;Character, Integer&gt; charMapToPos = new HashMap&lt;&gt;();</span><br><span class="line">        // 当前寻找的子串的起始位置</span><br><span class="line">        int startPos = 0;</span><br><span class="line">        while (startPos &lt; strLength) &#123;</span><br><span class="line">            StringBuilder temp = new StringBuilder();</span><br><span class="line">            for (int j = startPos; j &lt; strLength; ++j) &#123;</span><br><span class="line">                // 发现重复</span><br><span class="line">                if (charMapToPos.containsKey(s.charAt(j))) &#123;</span><br><span class="line">                    if (temp.length() &gt; maxLength) &#123;</span><br><span class="line">                        maxLength = temp.length();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    startPos = charMapToPos.get(s.charAt(j)) + 1;</span><br><span class="line">                    charMapToPos.clear();</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">                else &#123;</span><br><span class="line">                    temp.append(s.charAt(j));</span><br><span class="line">                    charMapToPos.put(s.charAt(j), j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if (temp.length() &gt; maxLength) &#123;</span><br><span class="line">                maxLength = temp.length();</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return maxLength;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="继续思考"><a href="#继续思考" class="headerlink" title="继续思考"></a>继续思考</h1><p>之前的代码一直有一个temp字符串记录已有的字符串，但其实可以直接记录下标，记录子串的开始下标以及结束下标即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public int lengthOfLongestSubstring(String s) &#123;</span><br><span class="line">        int maxLength = 0;</span><br><span class="line"></span><br><span class="line">        int leftPos = 0;</span><br><span class="line"></span><br><span class="line">        int rightPos = 0;</span><br><span class="line"></span><br><span class="line">        int length = s.length();</span><br><span class="line"></span><br><span class="line">        HashMap&lt;Character, Integer&gt; charMapToPos = new HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        while (length - leftPos &gt; maxLength &amp;&amp; rightPos &lt; length) &#123;</span><br><span class="line">            char c = s.charAt(rightPos);</span><br><span class="line">            if (charMapToPos.containsKey(c) &amp;&amp; charMapToPos.get(c) &gt;= leftPos) &#123;</span><br><span class="line">                maxLength = Math.max(rightPos - leftPos, maxLength);</span><br><span class="line">                leftPos = charMapToPos.get(c) + 1;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            charMapToPos.put(c, rightPos);</span><br><span class="line">            ++rightPos;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        maxLength = Math.max(rightPos - leftPos, maxLength);</span><br><span class="line"></span><br><span class="line">        return maxLength;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leehaoze.com/2019/09/16/Spring-Boot-实现时间戳参数与LocalDateTime的互转/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leehaoze">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leehaoze's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/16/Spring-Boot-实现时间戳参数与LocalDateTime的互转/" itemprop="url">Spring-Boot 实现时间戳参数与LocalDateTime的互转</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-16T16:11:13+08:00">
                2019-09-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>数据库中包括实体类对于时间的储存使用的是LocalDateTime类型，而前端接受和返回的都是时间戳类型，所以需要实现在Spring Boot框架下时间戳与LocalDateTime的互转</p>
<h1 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h1><p>实现LocalDateTime的json序列化与反序列化类，通过注解使用</p>
<h1 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h1><p>在VO的属性中，加入序列化、反序列化的注解即可实现时间戳与LocalDateTime的互转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">    @JsonDeserialize(using = LocalDateTimeDeserialize.class)</span><br><span class="line">    @JsonSerialize(using = LocalDateTimeSerializer.class)</span><br><span class="line">    private LocalDateTime lastOnlineTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h1><p>分别继承 <code>JsonDeserializer</code> 与 <code>JsonSerializer</code>即可</p>
<ul>
<li><p>LocalDateTimeDeserialize</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class LocalDateTimeDeserialize extends JsonDeserializer&lt;LocalDateTime&gt; &#123;</span><br><span class="line">    public final int MILLISECOND_TIMESTAMP_LENGTH = 13;</span><br><span class="line"></span><br><span class="line">    public final int SECOND_TIMESTAMP_LENGTH  = 10;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public LocalDateTime deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException &#123;</span><br><span class="line">        String text = jsonParser.getText().trim();</span><br><span class="line">        long timestamp;</span><br><span class="line">        if(text.length() == MILLISECOND_TIMESTAMP_LENGTH)&#123;</span><br><span class="line">            timestamp = Long.parseLong(text) / 1000;</span><br><span class="line">        &#125;</span><br><span class="line">        else&#123;</span><br><span class="line">            timestamp = Long.parseLong(text);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(timestamp);</span><br><span class="line"></span><br><span class="line">        return LocalDateTime.ofEpochSecond(timestamp,0, ZoneOffset.ofHours(8));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>LocalDateTimeSerializer</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class LocalDateTimeSerializer extends JsonSerializer&lt;LocalDateTime&gt; &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void serialize(LocalDateTime value, JsonGenerator gen, SerializerProvider serializers) throws IOException &#123;</span><br><span class="line">        gen.writeNumber(value.toInstant(ZoneOffset.of(&quot;+8&quot;)).toEpochMilli());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Leehaoze</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Leehaoze</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
