---
title: 2-3树与红黑树
date: 2020-01-03 21:18:23
tags:
- 数据结构
---
# 从2-3树到红黑树 
红黑树是这样定义的：
- 每个结点要么是红的要么是黑的。  
- 根结点是黑的。  
- 每个叶结点（叶结点即指树尾端NIL指针或NULL结点）都是黑的。  
- 如果一个结点是红的，那么它的两个儿子都是黑的。  
- 对于任意结点而言，其到叶结点树尾端NIL指针的每条路径都包含相同数目的黑结点。 

一颗常见的红黑树长这样
![laONsx.jpg](https://s2.ax1x.com/2020/01/03/laONsx.jpg)

如果你把红节点拉平变成这样

![laOOmV.jpg](https://s2.ax1x.com/2020/01/03/laOOmV.jpg)

你会发现这就是一颗 2-3树

红色节点表示该节点与其父亲组合成为一个3-节点。我们再来看一下红黑树的定义中的限制。

第一条说明红黑树中有两种不同类型的节点，红节点-黑节点，红节点的含义之前说过了。 另外值得注意的是红色节点是一直在黑色节点的左儿子上，这样做也是为了方便判断

第二条是要求根节点必须为黑色，因为红色节点代表着红色节点与父亲组成一个3-节点，而根节点是没有父亲的，因此根节点必须是黑色。

第三条要求所有叶子节点是黑色，方便我们代码中去识别没有儿子的节点

第四条 亦是对应着2-3树的性质，如果一个红色节点的儿子也是红色节点，那么他们就组成了一个2-3-4树，2-3-4树就有另外的插入删除方式了，因此有这一条定义限制红黑树必须对应一颗标准的2-3树

第五条 也叫 红黑树的黑高一致，因为黑色节点对应着2-3树中的一个 2-节点或3-节点，红色节点只是3-节点的表达方式的组成部分。2-3树是完美平衡的树，他的子树也都是一颗完美平衡的树，因此对于每个子树的根节点而言，到达左右子树的叶子节点的路径长度肯定是一样的，因此红黑树中有这样一条性质 保证了红黑树对应2-3树的完美平衡特点。

# 红黑树的查询
红黑树也是一颗二叉搜索树，因此其查询方式与二叉搜索树的查询方式一致

# 红黑树的插入
对于2-3的插入操作而言，有一个分裂节点的操作，也就是在新插入的节点沉入底部后，根据节点的类型进行分裂操作，相对应的红黑树也有此类操作，称为`反色`
![laOzY4.jpg](https://s2.ax1x.com/2020/01/03/laOzY4.jpg)
对比 2-3树
![laXClR.jpg](https://s2.ax1x.com/2020/01/03/laXClR.jpg)

另外红黑树还有相对应的旋转操作：左旋和右旋
![laXP61.jpg](https://s2.ax1x.com/2020/01/03/laXP61.jpg)

通过这两种（旋转、分裂）操作，我们可以将模拟2-3树的红黑树实现与2-3树一样的操作。

在2-3树中，我们将新插入的节点沉入底部，与最底部的节点合并，随后再进行其他操作。为了表示合并，我们将新插入的节点用红色节点表示，随后再对其进行调整。大概分为几种情况


- 插入后 某个黑色节点的 左儿子是黑色，右儿子是黑色，我们要将红色节点旋转过来。
![laXETO.jpg](https://s2.ax1x.com/2020/01/03/laXETO.jpg)

- 插入后，形成了4-节点
我们直接利用反色分解
![laXete.jpg](https://s2.ax1x.com/2020/01/03/laXete.jpg)

- 插入后，有连续的红色节点
利用旋转转为情况2，再按照情况2操作
![laXZkD.jpg](https://s2.ax1x.com/2020/01/03/laXZkD.jpg)






